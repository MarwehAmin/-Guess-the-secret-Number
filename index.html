
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the number</title>
    <link rel="stylesheet" href="Game.css">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

</head>
<body>
    <h2>
        üèÜLeaderboard
    </h2>

    <ol id="leaderboard">

    </ol>

    <h1>üî¢ Guess the secret Number</h1>
    <p>Select a level and try to guess the number!</p>

    <select id="level">
        <option value="10"> Easy (1-10) </option>
        <option value="20"> Medium (1-20) </option>
        <option value="50" selected> Hard (1-50) </option>
    </select>
    <br>
    <input type="number" id="guess" placeholder="Enter your guess">
    <button id="checkBtn">Check</button>
    <button id="restartBtn">Play Again</button>
    
    <p id="message"></p>
    <p id="hint"></p>

    <p>Tries left : <span id="tries">5</span> </p>

    <audio id="sound-correct" src="https://www.soundjay.com/buttons/sounds/button-2.mp3"></audio>
    <audio id="sound-wrong" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
    <audio id="sound-close" src="https://www.soundjay.com/buttons/sounds/button-09a.mp3"></audio>
    <audio id="bg-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>


    <script>

        function launchConfetti(){
            confetti({
                particleCount : 360,
                spread: 360,
                origin: {y:0.5}
            })
        }


        function saveScore(score){
            let scores = JSON.parse(localStorage.getItem("leaderboard")) || [];
            scores.push(score);
            scores.sort((a,b)=>b-a); 

            scores.slice(0,5);
            localStorage.setItem("leaderboard",JSON.stringify(scores));
            renderLeaderBoard();
        }

        function renderLeaderBoard(){
            let scores = JSON.parse(localStorage.getItem("leaderboard")) || [];
            const leaderboardEl = document.getElementById("leaderboard");
            leaderboardEl.innerHTML = scores.map(sc => `<li> ${sc} points </li>`).join("");
        }
        renderLeaderBoard();
        let secretNumber;
        let triesLeft = 5;

        const messageEl = document.getElementById("message");
        const hintEl = document.getElementById("hint");
        const checkBtn = document.getElementById("checkBtn");
        const restartBtn = document.getElementById("restartBtn");
        const levelSelect = document.getElementById("level");

        const soundCorrect = document.getElementById("sound-correct");
        const soundWrong = document.getElementById("sound-wrong");
        const soundClose = document.getElementById("sound-close");
        const bgMusic = document.getElementById("bg-music");

        bgMusic.volume = 0.05;

        function generateSecretNumber(){
            const max = parseInt(levelSelect.value);
            secretNumber = Math.floor(Math.random() *max)+1;
        }
        generateSecretNumber();

        function resetGame (){
            generateSecretNumber();
            triesLeft = 5;
            document.getElementById("tries").innerHTML = triesLeft;
            messageEl.innerHTML = "";
            hintEl.innerHTML = "";
            document.getElementById("guess").value = "";
            checkBtn.disabled = false;
            renderLeaderBoard();
        }

        checkBtn.addEventListener("click", function(){
            if(bgMusic.paused){
                // bgMusic.play();
            }
            let userGuess = parseInt(document.getElementById("guess").value);
            messageEl.className = "";
            hintEl.style.opacity = "1";

            if(!userGuess){
                messageEl.innerText = "‚ö†Ô∏è Please enter a number!"
                hintEl.innerText = "";
                soundWrong.play();
                messageEl.classList.add("flash-red")
            }
   
            if(userGuess===secretNumber){
                messageEl.innerText = "üéâ Correct! You win!"
                hintEl.innerText = "";
                soundCorrect.play();
                messageEl.classList.add("flash-green")
                checkBtn.disabled = true;
                let score = triesLeft*10;
                saveScore(score);
                launchConfetti();
            }
            else {
                triesLeft--;
                document.getElementById("tries").innerText = triesLeft;
             
                if(triesLeft === 0){
                    messageEl.innerText = "üíÄ Game Over! the number was "+ secretNumber;
                    hintEl.innerText = "";
                    soundWrong.play();
                    messageEl.classList.add("flash-red")
                    checkBtn.disabled = true;
                }
                else {
                    messageEl.innerText = userGuess < secretNumber ? "Too low!" : "Too high!";
                    let distance = Math.abs (userGuess-secretNumber);
                    if(distance<=2){
                        hintEl.innerText = "üî• Very close!"
                        soundClose.play();
                    }
                    else if(distance <=5){
                        hintEl.innerText = "üòä Close!"
                        soundWrong.play();
                    }
                    else {
                        hintEl.innerText = "‚ùÑÔ∏è Far away!"
                        soundWrong.play(); 
                    }
                }
            }
        })

        restartBtn.addEventListener("click",resetGame);
        levelSelect.addEventListener("change",resetGame);

    </script>

</body>
</html>
